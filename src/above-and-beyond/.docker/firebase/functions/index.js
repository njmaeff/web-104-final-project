var _i=Object.create;var fe=Object.defineProperty;var gi=Object.getOwnPropertyDescriptor;var Ci=Object.getOwnPropertyNames,$e=Object.getOwnPropertySymbols,wi=Object.getPrototypeOf,mt=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable;var br=(t,e,r)=>e in t?fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,he=(t,e)=>{for(var r in e||(e={}))mt.call(e,r)&&br(t,r,e[r]);if($e)for(var r of $e(e))Rr.call(e,r)&&br(t,r,e[r]);return t};var Or=t=>fe(t,"__esModule",{value:!0});var pe=(t,e)=>{var r={};for(var s in t)mt.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&$e)for(var s of $e(t))e.indexOf(s)<0&&Rr.call(t,s)&&(r[s]=t[s]);return r};var c=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ei=(t,e)=>{for(var r in e)fe(t,r,{get:e[r],enumerable:!0})},qr=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ci(e))!mt.call(t,n)&&(r||n!=="default")&&fe(t,n,{get:()=>e[n],enumerable:!(s=gi(e,n))||s.enumerable});return t},Sr=(t,e)=>qr(Or(fe(t!=null?_i(wi(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Ri=(t=>(e,r)=>t&&t.get(e)||(r=qr(Or({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var Tr=c((Pr,Be)=>{(function(t,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof Be=="object"&&Be.exports?Be.exports=e():t.log=e()})(Pr,function(){"use strict";var t=function(){},e="undefined",r=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"];function n(y,p){var m=y[p];if(typeof m.bind=="function")return m.bind(y);try{return Function.prototype.bind.call(m,y)}catch{return function(){return Function.prototype.apply.apply(m,[y,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(y){return y==="debug"&&(y="log"),typeof console===e?!1:y==="trace"&&r?i:console[y]!==void 0?n(console,y):console.log!==void 0?n(console,"log"):t}function l(y,p){for(var m=0;m<s.length;m++){var _=s[m];this[_]=m<y?t:this.methodFactory(_,y,p)}this.log=this.debug}function o(y,p,m){return function(){typeof console!==e&&(l.call(this,p,m),this[y].apply(this,arguments))}}function v(y,p,m){return a(y)||o.apply(this,arguments)}function u(y,p,m){var _=this,b;p=p??"WARN";var E="loglevel";typeof y=="string"?E+=":"+y:typeof y=="symbol"&&(E=void 0);function S(g){var j=(s[g]||"silent").toUpperCase();if(!(typeof window===e||!E)){try{window.localStorage[E]=j;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+j+";"}catch{}}}function F(){var g;if(!(typeof window===e||!E)){try{g=window.localStorage[E]}catch{}if(typeof g===e)try{var j=window.document.cookie,V=j.indexOf(encodeURIComponent(E)+"=");V!==-1&&(g=/^([^;]+)/.exec(j.slice(V))[1])}catch{}return _.levels[g]===void 0&&(g=void 0),g}}function K(){if(!(typeof window===e||!E)){try{window.localStorage.removeItem(E);return}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}_.name=y,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=m||v,_.getLevel=function(){return b},_.setLevel=function(g,j){if(typeof g=="string"&&_.levels[g.toUpperCase()]!==void 0&&(g=_.levels[g.toUpperCase()]),typeof g=="number"&&g>=0&&g<=_.levels.SILENT){if(b=g,j!==!1&&S(g),l.call(_,g,y),typeof console===e&&g<_.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+g},_.setDefaultLevel=function(g){p=g,F()||_.setLevel(g,!1)},_.resetLevel=function(){_.setLevel(p,!1),K()},_.enableAll=function(g){_.setLevel(_.levels.TRACE,g)},_.disableAll=function(g){_.setLevel(_.levels.SILENT,g)};var z=F();z==null&&(z=p),_.setLevel(z,!1)}var d=new u,h={};d.getLogger=function(p){if(typeof p!="symbol"&&typeof p!="string"||p==="")throw new TypeError("You must supply a name when creating a logger.");var m=h[p];return m||(m=h[p]=new u(p,d.getLevel(),d.methodFactory)),m};var f=typeof window!==e?window.log:void 0;return d.noConflict=function(){return typeof window!==e&&window.log===d&&(window.log=f),d},d.getLoggers=function(){return h},d.default=d,d})});var U=c(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});var Ar=class extends Error{};vt.default=Ar});var Nr=c(me=>{"use strict";var bi=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(me,"__esModule",{value:!0});var Oi=bi(U()),Dr=class extends Oi.default{};me.default=Dr});var Mr=c(ve=>{"use strict";var qi=ve&&ve.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ve,"__esModule",{value:!0});var Si=qi(U()),xr=class extends Si.default{};ve.default=xr});var jr=c(ye=>{"use strict";var Pi=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ye,"__esModule",{value:!0});var Ti=Pi(U()),Fr=class extends Ti.default{};ye.default=Fr});var Ir=c(_e=>{"use strict";var Ai=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_e,"__esModule",{value:!0});var Di=Ai(U()),Ur=class extends Di.default{};_e.default=Ur});var Hr=c(ge=>{"use strict";var Ni=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ge,"__esModule",{value:!0});var xi=Ni(U()),Lr=class extends xi.default{};ge.default=Lr});var Br=c(Ce=>{"use strict";var Mi=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ce,"__esModule",{value:!0});var Fi=Mi(U()),$r=class extends Fi.default{};Ce.default=$r});var Kr=c(we=>{"use strict";var ji=we&&we.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(we,"__esModule",{value:!0});var Ui=ji(U()),kr=class extends Ui.default{};we.default=kr});var Jr=c(Ee=>{"use strict";var Ii=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ee,"__esModule",{value:!0});var Li=Ii(U()),zr=class extends Li.default{};Ee.default=zr});var Vr=c(Re=>{"use strict";var Hi=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Re,"__esModule",{value:!0});var $i=Hi(U()),Wr=class extends $i.default{constructor(e,r){super();this.importResults=r}};Re.default=Wr});var re=c(w=>{"use strict";var $=w&&w.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(w,"__esModule",{value:!0});w.ImportError=w.TypesenseError=w.ServerError=w.RequestUnauthorized=w.RequestMalformed=w.ObjectUnprocessable=w.ObjectNotFound=w.ObjectAlreadyExists=w.MissingConfigurationError=w.HTTPError=void 0;var Bi=$(Nr());w.HTTPError=Bi.default;var ki=$(Mr());w.MissingConfigurationError=ki.default;var Ki=$(jr());w.ObjectAlreadyExists=Ki.default;var zi=$(Ir());w.ObjectNotFound=zi.default;var Ji=$(Hr());w.ObjectUnprocessable=Ji.default;var Wi=$(Br());w.RequestMalformed=Wi.default;var Vi=$(Kr());w.RequestUnauthorized=Vi.default;var Gi=$(Jr());w.ServerError=Gi.default;var Yi=$(Vr());w.ImportError=Yi.default;var Xi=$(U());w.TypesenseError=Xi.default});var _t=c(B=>{"use strict";var Qi=B&&B.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),Zi=B&&B.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eo=B&&B.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qi(e,t,r);return Zi(e,t),e};Object.defineProperty(B,"__esModule",{value:!0});var to=eo(Tr()),yt=re(),Gr=class{constructor(e){this.nodes=e.nodes||[],this.nodes=this.nodes.map(r=>this.setDefaultPathInNode(r)).map(r=>this.setDefaultPortInNode(r)),this.nearestNode=e.nearestNode||null,this.nearestNode=this.setDefaultPathInNode(this.nearestNode),this.nearestNode=this.setDefaultPortInNode(this.nearestNode),this.connectionTimeoutSeconds=e.connectionTimeoutSeconds||e.timeoutSeconds||10,this.healthcheckIntervalSeconds=e.healthcheckIntervalSeconds||15,this.numRetries=e.numRetries||this.nodes.length+(this.nearestNode==null?0:1)||3,this.retryIntervalSeconds=e.retryIntervalSeconds||.1,this.apiKey=e.apiKey,this.sendApiKeyAsQueryParam=e.sendApiKeyAsQueryParam||!1,this.cacheSearchResultsForSeconds=e.cacheSearchResultsForSeconds||0,this.useServerSideSearchCache=e.useServerSideSearchCache||!1,this.logger=e.logger||to,this.logLevel=e.logLevel||"warn",this.logger.setLevel(this.logLevel),this.additionalHeaders=e.additionalHeaders,this.showDeprecationWarnings(e),this.validate()}validate(){if(this.nodes==null||this.nodes.length===0||this.validateNodes())throw new yt.MissingConfigurationError("Ensure that nodes[].protocol, nodes[].host and nodes[].port are set");if(this.nearestNode!=null&&this.isNodeMissingAnyParameters(this.nearestNode))throw new yt.MissingConfigurationError("Ensure that nearestNodes.protocol, nearestNodes.host and nearestNodes.port are set");if(this.apiKey==null)throw new yt.MissingConfigurationError("Ensure that apiKey is set");return!0}validateNodes(){return this.nodes.some(e=>this.isNodeMissingAnyParameters(e))}isNodeMissingAnyParameters(e){return!["protocol","host","port","path"].every(r=>e.hasOwnProperty(r))&&e.url==null}setDefaultPathInNode(e){return e!=null&&!e.hasOwnProperty("path")&&(e.path=""),e}setDefaultPortInNode(e){if(e!=null&&!e.hasOwnProperty("port")&&e.hasOwnProperty("protocol"))switch(e.protocol){case"https":e.port=443;break;case"http":e.port=80;break}return e}showDeprecationWarnings(e){e.timeoutSeconds&&this.logger.warn("Deprecation warning: timeoutSeconds is now renamed to connectionTimeoutSeconds"),e.masterNode&&this.logger.warn("Deprecation warning: masterNode is now consolidated to nodes, starting with Typesense Server v0.12"),e.readReplicaNodes&&this.logger.warn("Deprecation warning: readReplicaNodes is now consolidated to nodes, starting with Typesense Server v0.12")}};B.default=Gr});var gt=c((dl,Yr)=>{"use strict";Yr.exports=function(e,r){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(r,n)}}});var D=c((fl,Zr)=>{"use strict";var ro=gt(),Y=Object.prototype.toString;function Ct(t){return Y.call(t)==="[object Array]"}function wt(t){return typeof t=="undefined"}function so(t){return t!==null&&!wt(t)&&t.constructor!==null&&!wt(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function no(t){return Y.call(t)==="[object ArrayBuffer]"}function io(t){return typeof FormData!="undefined"&&t instanceof FormData}function oo(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function ao(t){return typeof t=="string"}function uo(t){return typeof t=="number"}function Xr(t){return t!==null&&typeof t=="object"}function ke(t){if(Y.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function lo(t){return Y.call(t)==="[object Date]"}function co(t){return Y.call(t)==="[object File]"}function fo(t){return Y.call(t)==="[object Blob]"}function Qr(t){return Y.call(t)==="[object Function]"}function ho(t){return Xr(t)&&Qr(t.pipe)}function po(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function mo(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function vo(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Et(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Ct(t))for(var r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function Rt(){var t={};function e(n,i){ke(t[i])&&ke(n)?t[i]=Rt(t[i],n):ke(n)?t[i]=Rt({},n):Ct(n)?t[i]=n.slice():t[i]=n}for(var r=0,s=arguments.length;r<s;r++)Et(arguments[r],e);return t}function yo(t,e,r){return Et(e,function(n,i){r&&typeof n=="function"?t[i]=ro(n,r):t[i]=n}),t}function _o(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}Zr.exports={isArray:Ct,isArrayBuffer:no,isBuffer:so,isFormData:io,isArrayBufferView:oo,isString:ao,isNumber:uo,isObject:Xr,isPlainObject:ke,isUndefined:wt,isDate:lo,isFile:co,isBlob:fo,isFunction:Qr,isStream:ho,isURLSearchParams:po,isStandardBrowserEnv:vo,forEach:Et,merge:Rt,extend:yo,trim:mo,stripBOM:_o}});var Ke=c((hl,ts)=>{"use strict";var se=D();function es(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}ts.exports=function(e,r,s){if(!r)return e;var n;if(s)n=s(r);else if(se.isURLSearchParams(r))n=r.toString();else{var i=[];se.forEach(r,function(o,v){o===null||typeof o=="undefined"||(se.isArray(o)?v=v+"[]":o=[o],se.forEach(o,function(d){se.isDate(d)?d=d.toISOString():se.isObject(d)&&(d=JSON.stringify(d)),i.push(es(v)+"="+es(d))}))}),n=i.join("&")}if(n){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}});var ss=c((pl,rs)=>{"use strict";var go=D();function ze(){this.handlers=[]}ze.prototype.use=function(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};ze.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ze.prototype.forEach=function(e){go.forEach(this.handlers,function(s){s!==null&&e(s)})};rs.exports=ze});var is=c((ml,ns)=>{"use strict";var Co=D();ns.exports=function(e,r){Co.forEach(e,function(n,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=n,delete e[i])})}});var Je=c((vl,os)=>{"use strict";os.exports=function(e,r,s,n,i){return e.config=r,s&&(e.code=s),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var We=c((yl,as)=>{"use strict";var wo=Je();as.exports=function(e,r,s,n,i){var a=new Error(e);return wo(a,r,s,n,i)}});var bt=c((_l,us)=>{"use strict";var Eo=We();us.exports=function(e,r,s){var n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):r(Eo("Request failed with status code "+s.status,s.config,null,s.request,s))}});var cs=c((gl,ls)=>{"use strict";var Ve=D();ls.exports=Ve.isStandardBrowserEnv()?function(){return{write:function(r,s,n,i,a,l){var o=[];o.push(r+"="+encodeURIComponent(s)),Ve.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ve.isString(i)&&o.push("path="+i),Ve.isString(a)&&o.push("domain="+a),l===!0&&o.push("secure"),document.cookie=o.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var fs=c((Cl,ds)=>{"use strict";ds.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var ps=c((wl,hs)=>{"use strict";hs.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Ot=c((El,ms)=>{"use strict";var Ro=fs(),bo=ps();ms.exports=function(e,r){return e&&!Ro(r)?bo(e,r):r}});var ys=c((Rl,vs)=>{"use strict";var qt=D(),Oo=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];vs.exports=function(e){var r={},s,n,i;return e&&qt.forEach(e.split(`
`),function(l){if(i=l.indexOf(":"),s=qt.trim(l.substr(0,i)).toLowerCase(),n=qt.trim(l.substr(i+1)),s){if(r[s]&&Oo.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([n]):r[s]=r[s]?r[s]+", "+n:n}}),r}});var Cs=c((bl,gs)=>{"use strict";var _s=D();gs.exports=_s.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function n(i){var a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=n(window.location.href),function(a){var l=_s.isString(a)?n(a):a;return l.protocol===s.protocol&&l.host===s.host}}():function(){return function(){return!0}}()});var Es=c((Ol,ws)=>{"use strict";var Ge=D(),qo=bt(),So=cs(),Po=Ke(),To=Ot(),Ao=ys(),Do=Cs(),St=We();ws.exports=function(e){return new Promise(function(s,n){var i=e.data,a=e.headers,l=e.responseType;Ge.isFormData(i)&&delete a["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(v+":"+u)}var d=To(e.baseURL,e.url);o.open(e.method.toUpperCase(),Po(d,e.params,e.paramsSerializer),!0),o.timeout=e.timeout;function h(){if(!!o){var y="getAllResponseHeaders"in o?Ao(o.getAllResponseHeaders()):null,p=!l||l==="text"||l==="json"?o.responseText:o.response,m={data:p,status:o.status,statusText:o.statusText,headers:y,config:e,request:o};qo(s,n,m),o=null}}if("onloadend"in o?o.onloadend=h:o.onreadystatechange=function(){!o||o.readyState!==4||o.status===0&&!(o.responseURL&&o.responseURL.indexOf("file:")===0)||setTimeout(h)},o.onabort=function(){!o||(n(St("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(St("Network Error",e,null,o)),o=null},o.ontimeout=function(){var p="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(p=e.timeoutErrorMessage),n(St(p,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",o)),o=null},Ge.isStandardBrowserEnv()){var f=(e.withCredentials||Do(d))&&e.xsrfCookieName?So.read(e.xsrfCookieName):void 0;f&&(a[e.xsrfHeaderName]=f)}"setRequestHeader"in o&&Ge.forEach(a,function(p,m){typeof i=="undefined"&&m.toLowerCase()==="content-type"?delete a[m]:o.setRequestHeader(m,p)}),Ge.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),l&&l!=="json"&&(o.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&o.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(p){!o||(o.abort(),n(p),o=null)}),i||(i=null),o.send(i)})}});var bs=c((ql,Rs)=>{var ne=1e3,ie=ne*60,oe=ie*60,X=oe*24,No=X*7,xo=X*365.25;Rs.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Mo(t);if(r==="number"&&isFinite(t))return e.long?jo(t):Fo(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Mo(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*xo;case"weeks":case"week":case"w":return r*No;case"days":case"day":case"d":return r*X;case"hours":case"hour":case"hrs":case"hr":case"h":return r*oe;case"minutes":case"minute":case"mins":case"min":case"m":return r*ie;case"seconds":case"second":case"secs":case"sec":case"s":return r*ne;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Fo(t){var e=Math.abs(t);return e>=X?Math.round(t/X)+"d":e>=oe?Math.round(t/oe)+"h":e>=ie?Math.round(t/ie)+"m":e>=ne?Math.round(t/ne)+"s":t+"ms"}function jo(t){var e=Math.abs(t);return e>=X?Ye(t,e,X,"day"):e>=oe?Ye(t,e,oe,"hour"):e>=ie?Ye(t,e,ie,"minute"):e>=ne?Ye(t,e,ne,"second"):t+" ms"}function Ye(t,e,r,s){var n=e>=r*1.5;return Math.round(t/r)+" "+s+(n?"s":"")}});var Pt=c((Sl,Os)=>{function Uo(t){r.debug=r,r.default=r,r.coerce=o,r.disable=i,r.enable=n,r.enabled=a,r.humanize=bs(),r.destroy=v,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,h=null,f,y;function p(...m){if(!p.enabled)return;let _=p,b=Number(new Date),E=b-(d||b);_.diff=E,_.prev=d,_.curr=b,d=b,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let S=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(K,z)=>{if(K==="%%")return"%";S++;let g=r.formatters[z];if(typeof g=="function"){let j=m[S];K=g.call(_,j),m.splice(S,1),S--}return K}),r.formatArgs.call(_,m),(_.log||r.log).apply(_,m)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=s,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==r.namespaces&&(f=r.namespaces,y=r.enabled(u)),y),set:m=>{h=m}}),typeof r.init=="function"&&r.init(p),p}function s(u,d){let h=r(this.namespace+(typeof d=="undefined"?":":d)+u);return h.log=this.log,h}function n(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d,h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)!h[d]||(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...r.names.map(l),...r.skips.map(l).map(d=>"-"+d)].join(",");return r.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(u))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(u))return!0;return!1}function l(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function o(u){return u instanceof Error?u.stack||u.message:u}function v(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Os.exports=Uo});var qs=c((N,Xe)=>{N.formatArgs=Lo;N.save=Ho;N.load=$o;N.useColors=Io;N.storage=Bo();N.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();N.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Io(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Lo(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Xe.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(s=r))}),t.splice(s,0,e)}N.log=console.debug||console.log||(()=>{});function Ho(t){try{t?N.storage.setItem("debug",t):N.storage.removeItem("debug")}catch{}}function $o(){let t;try{t=N.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Bo(){try{return localStorage}catch{}}Xe.exports=Pt()(N);var{formatters:ko}=Xe.exports;ko.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ps=c((Pl,Ss)=>{"use strict";Ss.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",s=e.indexOf(r+t),n=e.indexOf("--");return s!==-1&&(n===-1||s<n)}});var Ds=c((Tl,As)=>{"use strict";var Ko=require("os"),Ts=require("tty"),I=Ps(),{env:R}=process,W;I("no-color")||I("no-colors")||I("color=false")||I("color=never")?W=0:(I("color")||I("colors")||I("color=true")||I("color=always"))&&(W=1);"FORCE_COLOR"in R&&(R.FORCE_COLOR==="true"?W=1:R.FORCE_COLOR==="false"?W=0:W=R.FORCE_COLOR.length===0?1:Math.min(parseInt(R.FORCE_COLOR,10),3));function Tt(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function At(t,e){if(W===0)return 0;if(I("color=16m")||I("color=full")||I("color=truecolor"))return 3;if(I("color=256"))return 2;if(t&&!e&&W===void 0)return 0;let r=W||0;if(R.TERM==="dumb")return r;if(process.platform==="win32"){let s=Ko.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in R)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(s=>s in R)||R.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in R)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(R.TEAMCITY_VERSION)?1:0;if(R.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in R){let s=parseInt((R.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(R.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(R.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(R.TERM)||"COLORTERM"in R?1:r}function zo(t){let e=At(t,t&&t.isTTY);return Tt(e)}As.exports={supportsColor:zo,stdout:Tt(At(!0,Ts.isatty(1))),stderr:Tt(At(!0,Ts.isatty(2)))}});var xs=c((O,Ze)=>{var Jo=require("tty"),Qe=require("util");O.init=Zo;O.log=Yo;O.formatArgs=Vo;O.save=Xo;O.load=Qo;O.useColors=Wo;O.destroy=Qe.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");O.colors=[6,2,3,4,5,1];try{let t=Ds();t&&(t.stderr||t).level>=2&&(O.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}O.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[e];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),t[r]=s,t},{});function Wo(){return"colors"in O.inspectOpts?Boolean(O.inspectOpts.colors):Jo.isatty(process.stderr.fd)}function Vo(t){let{namespace:e,useColors:r}=this;if(r){let s=this.color,n="[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${e} [0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(n+"m+"+Ze.exports.humanize(this.diff)+"[0m")}else t[0]=Go()+e+" "+t[0]}function Go(){return O.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Yo(...t){return process.stderr.write(Qe.format(...t)+`
`)}function Xo(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Qo(){return process.env.DEBUG}function Zo(t){t.inspectOpts={};let e=Object.keys(O.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=O.inspectOpts[e[r]]}Ze.exports=Pt()(O);var{formatters:Ns}=Ze.exports;Ns.o=function(t){return this.inspectOpts.colors=this.useColors,Qe.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Ns.O=function(t){return this.inspectOpts.colors=this.useColors,Qe.inspect(t,this.inspectOpts)}});var Ms=c((Al,Dt)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Dt.exports=qs():Dt.exports=xs()});var js=c((Dl,Fs)=>{var be;Fs.exports=function(){if(!be){try{be=Ms()("follow-redirects")}catch{}typeof be!="function"&&(be=function(){})}be.apply(null,arguments)}});var jt=c((Nl,Ft)=>{var Q=require("url"),Nt=Q.URL,ea=require("http"),ta=require("https"),Us=require("stream").Writable,ra=require("assert"),Is=js(),Z=["abort","aborted","connect","error","socket","timeout"],xt=Object.create(null);Z.forEach(function(t){xt[t]=function(e,r,s){this._redirectable.emit(t,e,r,s)}});var Ls=et("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),sa=et("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),na=et("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),ia=et("ERR_STREAM_WRITE_AFTER_END","write after end");function x(t,e){Us.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(s){r._processResponse(s)},this._performRequest()}x.prototype=Object.create(Us.prototype);x.prototype.abort=function(){Bs(this._currentRequest),this.emit("abort")};x.prototype.write=function(t,e,r){if(this._ending)throw new ia;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new na),this.abort())};x.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var s=this,n=this._currentRequest;this.write(t,e,function(){s._ended=!0,n.end(null,null,r)}),this._ending=!0}};x.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};x.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};x.prototype.setTimeout=function(t,e){var r=this;function s(a){a.setTimeout(t),a.removeListener("timeout",a.destroy),a.addListener("timeout",a.destroy)}function n(a){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),i()},t),s(a)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",n)}return e&&this.on("timeout",e),this.socket?n(this.socket):this._currentRequest.once("socket",n),this.on("socket",s),this.on("abort",i),this.on("error",i),this.on("response",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){x.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(x.prototype,t,{get:function(){return this._currentRequest[t]}})});x.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};x.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var s=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Q.format(this._options),s._redirectable=this;for(var n=0;n<Z.length;n++)s.on(Z[n],xt[Z[n]]);if(this._isRedirect){var i=0,a=this,l=this._requestBodyBuffers;(function o(v){if(s===a._currentRequest)if(v)a.emit("error",v);else if(i<l.length){var u=l[i++];s.finished||s.write(u.data,u.encoding,o)}else a._ended&&s.end()})()}};x.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(Bs(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new sa);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Mt(/^content-/i,this._options.headers));var s=Mt(/^host$/i,this._options.headers),n=Q.parse(this._currentUrl),i=s||n.host,a=/^\w+:/.test(r)?this._currentUrl:Q.format(Object.assign(n,{host:i})),l;try{l=Q.resolve(a,r)}catch(u){this.emit("error",new Ls(u));return}Is("redirecting to",l),this._isRedirect=!0;var o=Q.parse(l);if(Object.assign(this._options,o),o.host===i||aa(o.host,i)||Mt(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var v={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,v)}catch(u){this.emit("error",u);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(u){this.emit("error",new Ls(u))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function Hs(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(s){var n=s+":",i=r[n]=t[s],a=e[s]=Object.create(i);function l(v,u,d){if(typeof v=="string"){var h=v;try{v=$s(new Nt(h))}catch{v=Q.parse(h)}}else Nt&&v instanceof Nt?v=$s(v):(d=u,u=v,v={protocol:n});return typeof u=="function"&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},v,u),u.nativeProtocols=r,ra.equal(u.protocol,n,"protocol mismatch"),Is("options",u),new x(u,d)}function o(v,u,d){var h=a.request(v,u,d);return h.end(),h}Object.defineProperties(a,{request:{value:l,configurable:!0,enumerable:!0,writable:!0},get:{value:o,configurable:!0,enumerable:!0,writable:!0}})}),e}function oa(){}function $s(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function Mt(t,e){var r;for(var s in e)t.test(s)&&(r=e[s].toString().trim(),delete e[s]);return r}function et(t,e){function r(s){Error.captureStackTrace(this,this.constructor),s?(this.message=e+": "+s.message,this.cause=s):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function Bs(t){for(var e=0;e<Z.length;e++)t.removeListener(Z[e],xt[Z[e]]);t.on("error",oa),t.abort()}function aa(t,e){let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}Ft.exports=Hs({http:ea,https:ta});Ft.exports.wrap=Hs});var Ut=c((xl,ua)=>{ua.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var Vs=c((Ml,Ws)=>{"use strict";var Oe=D(),ks=bt(),la=Ot(),ca=Ke(),da=require("http"),fa=require("https"),ha=jt().http,pa=jt().https,Ks=require("url"),ma=require("zlib"),va=Ut(),tt=We(),It=Je(),zs=/https:?/;function Js(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var s=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+s}t.beforeRedirect=function(i){i.headers.host=i.host,Js(i,e,i.href)}}Ws.exports=function(e){return new Promise(function(s,n){var i=function(C){s(C)},a=function(C){n(C)},l=e.data,o=e.headers;if("User-Agent"in o||"user-agent"in o?!o["User-Agent"]&&!o["user-agent"]&&(delete o["User-Agent"],delete o["user-agent"]):o["User-Agent"]="axios/"+va.version,l&&!Oe.isStream(l)){if(!Buffer.isBuffer(l))if(Oe.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(Oe.isString(l))l=Buffer.from(l,"utf-8");else return a(tt("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));o["Content-Length"]=l.length}var v=void 0;if(e.auth){var u=e.auth.username||"",d=e.auth.password||"";v=u+":"+d}var h=la(e.baseURL,e.url),f=Ks.parse(h),y=f.protocol||"http:";if(!v&&f.auth){var p=f.auth.split(":"),m=p[0]||"",_=p[1]||"";v=m+":"+_}v&&delete o.Authorization;var b=zs.test(y),E=b?e.httpsAgent:e.httpAgent,S={path:ca(f.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:o,agent:E,agents:{http:e.httpAgent,https:e.httpsAgent},auth:v};e.socketPath?S.socketPath=e.socketPath:(S.hostname=f.hostname,S.port=f.port);var F=e.proxy;if(!F&&F!==!1){var K=y.slice(0,-1)+"_proxy",z=process.env[K]||process.env[K.toUpperCase()];if(z){var g=Ks.parse(z),j=process.env.no_proxy||process.env.NO_PROXY,V=!0;if(j){var ht=j.split(",").map(function(C){return C.trim()});V=!ht.some(function(C){return C?C==="*"||C[0]==="."&&f.hostname.substr(f.hostname.length-C.length)===C?!0:f.hostname===C:!1})}if(V&&(F={host:g.hostname,port:g.port,protocol:g.protocol},g.auth)){var _r=g.auth.split(":");F.auth={username:_r[0],password:_r[1]}}}}F&&(S.headers.host=f.hostname+(f.port?":"+f.port:""),Js(S,F,y+"//"+f.hostname+(f.port?":"+f.port:"")+S.path));var Ie,gr=b&&(F?zs.test(F.protocol):!0);e.transport?Ie=e.transport:e.maxRedirects===0?Ie=gr?fa:da:(e.maxRedirects&&(S.maxRedirects=e.maxRedirects),Ie=gr?pa:ha),e.maxBodyLength>-1&&(S.maxBodyLength=e.maxBodyLength);var A=Ie.request(S,function(C){if(!A.aborted){var G=C,Le=C.req||A;if(C.statusCode!==204&&Le.method!=="HEAD"&&e.decompress!==!1)switch(C.headers["content-encoding"]){case"gzip":case"compress":case"deflate":G=G.pipe(ma.createUnzip()),delete C.headers["content-encoding"];break}var He={status:C.statusCode,statusText:C.statusMessage,headers:C.headers,config:e,request:Le};if(e.responseType==="stream")He.data=G,ks(i,a,He);else{var Cr=[],wr=0;G.on("data",function(H){Cr.push(H),wr+=H.length,e.maxContentLength>-1&&wr>e.maxContentLength&&(G.destroy(),a(tt("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,Le)))}),G.on("error",function(H){A.aborted||a(It(H,e,null,Le))}),G.on("end",function(){var H=Buffer.concat(Cr);e.responseType!=="arraybuffer"&&(H=H.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(H=Oe.stripBOM(H))),He.data=H,ks(i,a,He)})}}});if(A.on("error",function(C){A.aborted&&C.code!=="ERR_FR_TOO_MANY_REDIRECTS"||a(It(C,e,null,A))}),e.timeout){var pt=parseInt(e.timeout,10);if(isNaN(pt)){a(tt("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",A));return}A.setTimeout(pt,function(){A.abort(),a(tt("timeout of "+pt+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",A))})}e.cancelToken&&e.cancelToken.promise.then(function(C){A.aborted||(A.abort(),a(C))}),Oe.isStream(l)?l.on("error",function(C){a(It(C,e,null,A))}).pipe(A):A.end(l)})}});var st=c((Fl,Xs)=>{"use strict";var q=D(),Gs=is(),ya=Je(),_a={"Content-Type":"application/x-www-form-urlencoded"};function Ys(t,e){!q.isUndefined(t)&&q.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function ga(){var t;return typeof XMLHttpRequest!="undefined"?t=Es():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=Vs()),t}function Ca(t,e,r){if(q.isString(t))try{return(e||JSON.parse)(t),q.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}var rt={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:ga(),transformRequest:[function(e,r){return Gs(r,"Accept"),Gs(r,"Content-Type"),q.isFormData(e)||q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)?e:q.isArrayBufferView(e)?e.buffer:q.isURLSearchParams(e)?(Ys(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):q.isObject(e)||r&&r["Content-Type"]==="application/json"?(Ys(r,"application/json"),Ca(e)):e}],transformResponse:[function(e){var r=this.transitional,s=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,i=!s&&this.responseType==="json";if(i||n&&q.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?ya(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};rt.headers={common:{Accept:"application/json, text/plain, */*"}};q.forEach(["delete","get","head"],function(e){rt.headers[e]={}});q.forEach(["post","put","patch"],function(e){rt.headers[e]=q.merge(_a)});Xs.exports=rt});var Zs=c((jl,Qs)=>{"use strict";var wa=D(),Ea=st();Qs.exports=function(e,r,s){var n=this||Ea;return wa.forEach(s,function(a){e=a.call(n,e,r)}),e}});var Lt=c((Ul,en)=>{"use strict";en.exports=function(e){return!!(e&&e.__CANCEL__)}});var sn=c((Il,rn)=>{"use strict";var tn=D(),Ht=Zs(),Ra=Lt(),ba=st();function $t(t){t.cancelToken&&t.cancelToken.throwIfRequested()}rn.exports=function(e){$t(e),e.headers=e.headers||{},e.data=Ht.call(e,e.data,e.headers,e.transformRequest),e.headers=tn.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),tn.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var r=e.adapter||ba.adapter;return r(e).then(function(n){return $t(e),n.data=Ht.call(e,n.data,n.headers,e.transformResponse),n},function(n){return Ra(n)||($t(e),n&&n.response&&(n.response.data=Ht.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})}});var Bt=c((Ll,nn)=>{"use strict";var P=D();nn.exports=function(e,r){r=r||{};var s={},n=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function o(h,f){return P.isPlainObject(h)&&P.isPlainObject(f)?P.merge(h,f):P.isPlainObject(f)?P.merge({},f):P.isArray(f)?f.slice():f}function v(h){P.isUndefined(r[h])?P.isUndefined(e[h])||(s[h]=o(void 0,e[h])):s[h]=o(e[h],r[h])}P.forEach(n,function(f){P.isUndefined(r[f])||(s[f]=o(void 0,r[f]))}),P.forEach(i,v),P.forEach(a,function(f){P.isUndefined(r[f])?P.isUndefined(e[f])||(s[f]=o(void 0,e[f])):s[f]=o(void 0,r[f])}),P.forEach(l,function(f){f in r?s[f]=o(e[f],r[f]):f in e&&(s[f]=o(void 0,e[f]))});var u=n.concat(i).concat(a).concat(l),d=Object.keys(e).concat(Object.keys(r)).filter(function(f){return u.indexOf(f)===-1});return P.forEach(d,v),s}});var cn=c((Hl,ln)=>{"use strict";var on=Ut(),kt={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){kt[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});var an={},Oa=on.version.split(".");function un(t,e){for(var r=e?e.split("."):Oa,s=t.split("."),n=0;n<3;n++){if(r[n]>s[n])return!0;if(r[n]<s[n])return!1}return!1}kt.transitional=function(e,r,s){var n=r&&un(r);function i(a,l){return"[Axios v"+on.version+"] Transitional option '"+a+"'"+l+(s?". "+s:"")}return function(a,l,o){if(e===!1)throw new Error(i(l," has been removed in "+r));return n&&!an[l]&&(an[l]=!0,console.warn(i(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,l,o):!0}};function qa(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var s=Object.keys(t),n=s.length;n-- >0;){var i=s[n],a=e[i];if(a){var l=t[i],o=l===void 0||a(l,i,t);if(o!==!0)throw new TypeError("option "+i+" must be "+o);continue}if(r!==!0)throw Error("Unknown option "+i)}}ln.exports={isOlderVersion:un,assertOptions:qa,validators:kt}});var vn=c(($l,mn)=>{"use strict";var dn=D(),Sa=Ke(),fn=ss(),hn=sn(),nt=Bt(),pn=cn(),ae=pn.validators;function qe(t){this.defaults=t,this.interceptors={request:new fn,response:new fn}}qe.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=nt(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&pn.assertOptions(r,{silentJSONParsing:ae.transitional(ae.boolean,"1.0.0"),forcedJSONParsing:ae.transitional(ae.boolean,"1.0.0"),clarifyTimeoutError:ae.transitional(ae.boolean,"1.0.0")},!1);var s=[],n=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(n=n&&h.synchronous,s.unshift(h.fulfilled,h.rejected))});var i=[];this.interceptors.response.forEach(function(h){i.push(h.fulfilled,h.rejected)});var a;if(!n){var l=[hn,void 0];for(Array.prototype.unshift.apply(l,s),l=l.concat(i),a=Promise.resolve(e);l.length;)a=a.then(l.shift(),l.shift());return a}for(var o=e;s.length;){var v=s.shift(),u=s.shift();try{o=v(o)}catch(d){u(d);break}}try{a=hn(o)}catch(d){return Promise.reject(d)}for(;i.length;)a=a.then(i.shift(),i.shift());return a};qe.prototype.getUri=function(e){return e=nt(this.defaults,e),Sa(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};dn.forEach(["delete","get","head","options"],function(e){qe.prototype[e]=function(r,s){return this.request(nt(s||{},{method:e,url:r,data:(s||{}).data}))}});dn.forEach(["post","put","patch"],function(e){qe.prototype[e]=function(r,s,n){return this.request(nt(n||{},{method:e,url:r,data:s}))}});mn.exports=qe});var zt=c((Bl,yn)=>{"use strict";function Kt(t){this.message=t}Kt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Kt.prototype.__CANCEL__=!0;yn.exports=Kt});var gn=c((kl,_n)=>{"use strict";var Pa=zt();function it(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var r=this;t(function(n){r.reason||(r.reason=new Pa(n),e(r.reason))})}it.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};it.source=function(){var e,r=new it(function(n){e=n});return{token:r,cancel:e}};_n.exports=it});var wn=c((Kl,Cn)=>{"use strict";Cn.exports=function(e){return function(s){return e.apply(null,s)}}});var Rn=c((zl,En)=>{"use strict";En.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var qn=c((Jl,Jt)=>{"use strict";var bn=D(),Ta=gt(),ot=vn(),Aa=Bt(),Da=st();function On(t){var e=new ot(t),r=Ta(ot.prototype.request,e);return bn.extend(r,ot.prototype,e),bn.extend(r,e),r}var L=On(Da);L.Axios=ot;L.create=function(e){return On(Aa(L.defaults,e))};L.Cancel=zt();L.CancelToken=gn();L.isCancel=Lt();L.all=function(e){return Promise.all(e)};L.spread=wn();L.isAxiosError=Rn();Jt.exports=L;Jt.exports.default=L});var Pn=c((Wl,Sn)=>{Sn.exports=qn()});var Vt=c(Se=>{"use strict";var Tn=Se&&Se.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Se,"__esModule",{value:!0});var An=Tn(Pn()),ee=re(),Na=Tn(U()),xa="X-TYPESENSE-API-KEY",Wt=!0,Ma=!1,Dn=class{constructor(e){this.configuration=e,this.apiKey=this.configuration.apiKey,this.nodes=JSON.parse(JSON.stringify(this.configuration.nodes)),this.nearestNode=JSON.parse(JSON.stringify(this.configuration.nearestNode)),this.connectionTimeoutSeconds=this.configuration.connectionTimeoutSeconds,this.healthcheckIntervalSeconds=this.configuration.healthcheckIntervalSeconds,this.numRetriesPerRequest=this.configuration.numRetries,this.retryIntervalSeconds=this.configuration.retryIntervalSeconds,this.sendApiKeyAsQueryParam=this.configuration.sendApiKeyAsQueryParam,this.additionalUserHeaders=this.configuration.additionalHeaders,this.logger=this.configuration.logger,this.initializeMetadataForNodes(),this.currentNodeIndex=-1}get(e,r={},{abortSignal:s=null}={}){return this.performRequest("get",e,{queryParameters:r,abortSignal:s})}delete(e,r={}){return this.performRequest("delete",e,{queryParameters:r})}post(e,r={},s={},n={}){return this.performRequest("post",e,{queryParameters:s,bodyParameters:r,additionalHeaders:n})}put(e,r={},s={}){return this.performRequest("put",e,{queryParameters:s,bodyParameters:r})}patch(e,r={},s={}){return this.performRequest("patch",e,{queryParameters:s,bodyParameters:r})}async performRequest(e,r,{queryParameters:s=null,bodyParameters:n=null,additionalHeaders:i={},abortSignal:a=null}){var l,o,v;this.configuration.validate();let u=Date.now(),d;this.logger.debug(`Request #${u}: Performing ${e.toUpperCase()} request: ${r}`);for(let h=1;h<=this.numRetriesPerRequest+1;h++){let f=this.getNextNode(u);if(this.logger.debug(`Request #${u}: Attempting ${e.toUpperCase()} request Try #${h} to Node ${f.index}`),a&&a.aborted)return Promise.reject(new Error("Request aborted by caller."));let y;try{let p={method:e,url:this.uriFor(r,f),headers:Object.assign({},this.defaultHeaders(),i,this.additionalUserHeaders),timeout:this.connectionTimeoutSeconds*1e3,maxContentLength:1/0,maxBodyLength:1/0,validateStatus:_=>_>0,transformResponse:[(_,b)=>{let E=_;return b!==void 0&&typeof _=="string"&&b["content-type"]&&b["content-type"].startsWith("application/json")&&(E=JSON.parse(_)),E}]};if(s&&Object.keys(s).length!==0&&(p.params=s),this.sendApiKeyAsQueryParam&&(p.params=p.params||{},p.params["x-typesense-api-key"]=this.apiKey),n&&Object.keys(n).length!==0&&(p.data=n),a){let b=An.default.CancelToken.source();y=()=>b.cancel(),a.addEventListener("abort",y),p.cancelToken=b.token}let m=await An.default(p);if(m.status>=1&&m.status<=499&&this.setNodeHealthcheck(f,Wt),this.logger.debug(`Request #${u}: Request to Node ${f.index} was made. Response Code was ${m.status}.`),m.status>=200&&m.status<300)return Promise.resolve(m.data);if(m.status<500)return Promise.reject(this.customErrorForResponse(m,(l=m.data)===null||l===void 0?void 0:l.message));throw this.customErrorForResponse(m,(o=m.data)===null||o===void 0?void 0:o.message)}catch(p){this.setNodeHealthcheck(f,Ma),d=p,this.logger.warn(`Request #${u}: Request to Node ${f.index} failed due to "${p.code} ${p.message}${p.response==null?"":" - "+JSON.stringify((v=p.response)===null||v===void 0?void 0:v.data)}"`),this.logger.warn(`Request #${u}: Sleeping for ${this.retryIntervalSeconds}s and then retrying request...`),await this.timer(this.retryIntervalSeconds)}finally{a&&y&&a.removeEventListener("abort",y)}}return this.logger.debug(`Request #${u}: No retries left. Raising last error`),Promise.reject(d)}getNextNode(e=0){if(this.nearestNode!=null){if(this.logger.debug(`Request #${e}: Nodes Health: Node ${this.nearestNode.index} is ${this.nearestNode.isHealthy===!0?"Healthy":"Unhealthy"}`),this.nearestNode.isHealthy===!0||this.nodeDueForHealthcheck(this.nearestNode,e))return this.logger.debug(`Request #${e}: Updated current node to Node ${this.nearestNode.index}`),this.nearestNode;this.logger.debug(`Request #${e}: Falling back to individual nodes`)}this.logger.debug(`Request #${e}: Nodes Health: ${this.nodes.map(s=>`Node ${s.index} is ${s.isHealthy===!0?"Healthy":"Unhealthy"}`).join(" || ")}`);let r;for(let s=0;s<=this.nodes.length;s++)if(this.currentNodeIndex=(this.currentNodeIndex+1)%this.nodes.length,r=this.nodes[this.currentNodeIndex],r.isHealthy===!0||this.nodeDueForHealthcheck(r,e))return this.logger.debug(`Request #${e}: Updated current node to Node ${r.index}`),r;return this.logger.debug(`Request #${e}: No healthy nodes were found. Returning the next node, Node ${r.index}`),r}nodeDueForHealthcheck(e,r=0){let s=Date.now()-e.lastAccessTimestamp>this.healthcheckIntervalSeconds*1e3;return s&&this.logger.debug(`Request #${r}: Node ${e.index} has exceeded healtcheckIntervalSeconds of ${this.healthcheckIntervalSeconds}. Adding it back into rotation.`),s}initializeMetadataForNodes(){this.nearestNode!=null&&(this.nearestNode.index="nearestNode",this.setNodeHealthcheck(this.nearestNode,Wt)),this.nodes.forEach((e,r)=>{e.index=r,this.setNodeHealthcheck(e,Wt)})}setNodeHealthcheck(e,r){e.isHealthy=r,e.lastAccessTimestamp=Date.now()}uriFor(e,r){return r.url!=null?`${r.url}${e}`:`${r.protocol}://${r.host}:${r.port}${r.path}${e}`}defaultHeaders(){let e={};return this.sendApiKeyAsQueryParam||(e[xa]=this.apiKey),e["Content-Type"]="application/json",e}async timer(e){return new Promise(r=>setTimeout(r,e*1e3))}customErrorForResponse(e,r){let s=`Request failed with HTTP code ${e.status}`;typeof r=="string"&&r.trim()!==""&&(s+=` | Server said: ${r}`);let n=new Na.default(s);return e.status===400?n=new ee.RequestMalformed(s):e.status===401?n=new ee.RequestUnauthorized(s):e.status===404?n=new ee.ObjectNotFound(s):e.status===409?n=new ee.ObjectAlreadyExists(s):e.status===422?n=new ee.ObjectUnprocessable(s):e.status>=500&&e.status<=599?n=new ee.ServerError(s):n=new ee.HTTPError(s),n.httpStatus=e.status,n}};Se.default=Dn});var k=c(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});var Gt="/collections",Nn=class{constructor(e){this.apiCall=e}async create(e){return await this.apiCall.post(Gt,e)}async retrieve(){return await this.apiCall.get(Gt)}static get RESOURCEPATH(){return Gt}};Yt.default=Nn});var Qt=c(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});var Fa=2*60,ja=100,xn=class{constructor(){this.responseCache=new Map}async perform(e,r,s,n){let{cacheResponseForSeconds:i=Fa,maxSize:a=ja}=n;if(i<=0||a<=0)return r.call(e,...s);let o=JSON.stringify(s),v=this.responseCache.get(o),u=Date.now();if(v){if(u-v.requestTimestamp<i*1e3)return this.responseCache.delete(o),this.responseCache.set(o,v),Promise.resolve(v.response);this.responseCache.delete(o)}let d=await r.call(e,...s);if(this.responseCache.set(o,{requestTimestamp:u,response:d}),this.responseCache.size>a){let f=this.responseCache.keys().next().value;this.responseCache.delete(f)}return d}};Xt.default=xn});var er=c(ue=>{"use strict";var Zt=ue&&ue.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ue,"__esModule",{value:!0});ue.SearchOnlyDocuments=void 0;var Ua=Zt(Qt()),Ia=Zt(k()),La=Zt(at()),Ha="/documents",Mn=class{constructor(e,r,s){this.collectionName=e,this.apiCall=r,this.configuration=s,this.requestWithCache=new Ua.default}async search(e,{cacheSearchResultsForSeconds:r=this.configuration.cacheSearchResultsForSeconds,abortSignal:s=null}={}){let n={};this.configuration.useServerSideSearchCache===!0&&(n.usecache=!0);let i=Object.assign({},e,n);return await this.requestWithCache.perform(this.apiCall,this.apiCall.get,[this.endpointPath("search"),i,{abortSignal:s}],{cacheResponseForSeconds:r})}endpointPath(e){return`${Ia.default.RESOURCEPATH}/${this.collectionName}${La.default.RESOURCEPATH}${e===void 0?"":"/"+e}`}static get RESOURCEPATH(){return Ha}};ue.SearchOnlyDocuments=Mn});var at=c(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});var $a=re(),Ba=er(),Fn=class extends Ba.SearchOnlyDocuments{constructor(e,r,s){super(e,r,s)}async create(e,r={}){if(!e)throw new Error("No document provided");return await this.apiCall.post(this.endpointPath(),e,r)}upsert(e,r={}){if(!e)throw new Error("No document provided");return this.apiCall.post(this.endpointPath(),e,Object.assign({},r,{action:"upsert"}))}update(e,r={}){if(!e)throw new Error("No document provided");return this.apiCall.post(this.endpointPath(),e,Object.assign({},r,{action:"update"}))}delete(e={}){return typeof e=="string"?this.apiCall.delete(this.endpointPath(e),e):this.apiCall.delete(this.endpointPath(),e)}async createMany(e,r={}){return this.configuration.logger.warn("createMany is deprecated and will be removed in a future version. Use import instead, which now takes both an array of documents or a JSONL string of documents"),this.import(e,r)}async import(e,r={}){let s;Array.isArray(e)?s=e.map(i=>JSON.stringify(i)).join(`
`):s=e;let n=await this.apiCall.performRequest("post",this.endpointPath("import"),{queryParameters:r,bodyParameters:s,additionalHeaders:{"Content-Type":"text/plain"}});if(Array.isArray(e)){let i=n.split(`
`).map(l=>JSON.parse(l)),a=i.filter(l=>l.success===!1);if(a.length>0)throw new $a.ImportError(`${i.length-a.length} documents imported successfully, ${a.length} documents failed during import. Use \`error.importResults\` from the raised exception to get a detailed error reason for each document.`,i);return i}else return n}async export(e={}){return await this.apiCall.get(this.endpointPath("export"),e)}};tr.default=Fn});var rr=c(Pe=>{"use strict";var ka=Pe&&Pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pe,"__esModule",{value:!0});var Ka=ka(k()),za="/overrides",ut=class{constructor(e,r){this.collectionName=e,this.apiCall=r}async upsert(e,r){return await this.apiCall.put(this.endpointPath(e),r)}async retrieve(){return await this.apiCall.get(this.endpointPath())}endpointPath(e){return`${Ka.default.RESOURCEPATH}/${this.collectionName}${ut.RESOURCEPATH}${e===void 0?"":"/"+e}`}static get RESOURCEPATH(){return za}};Pe.default=ut});var In=c(Te=>{"use strict";var jn=Te&&Te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Te,"__esModule",{value:!0});var Ja=jn(k()),Wa=jn(rr()),Un=class{constructor(e,r,s){this.collectionName=e,this.overrideId=r,this.apiCall=s}async retrieve(){return await this.apiCall.get(this.endpointPath())}async delete(){return await this.apiCall.delete(this.endpointPath())}endpointPath(){return`${Ja.default.RESOURCEPATH}/${this.collectionName}${Wa.default.RESOURCEPATH}/${this.overrideId}`}};Te.default=Un});var sr=c(Ae=>{"use strict";var Va=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ae,"__esModule",{value:!0});var Ga=Va(k()),Ya="/synonyms",lt=class{constructor(e,r){this.collectionName=e,this.apiCall=r}async upsert(e,r){return await this.apiCall.put(this.endpointPath(e),r)}async retrieve(){return await this.apiCall.get(this.endpointPath())}endpointPath(e){return`${Ga.default.RESOURCEPATH}/${this.collectionName}${lt.RESOURCEPATH}${e===void 0?"":"/"+e}`}static get RESOURCEPATH(){return Ya}};Ae.default=lt});var $n=c(De=>{"use strict";var Ln=De&&De.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(De,"__esModule",{value:!0});var Xa=Ln(k()),Qa=Ln(sr()),Hn=class{constructor(e,r,s){this.collectionName=e,this.synonymId=r,this.apiCall=s}async retrieve(){return await this.apiCall.get(this.endpointPath())}async delete(){return await this.apiCall.delete(this.endpointPath())}endpointPath(){return`${Xa.default.RESOURCEPATH}/${this.collectionName}${Qa.default.RESOURCEPATH}/${this.synonymId}`}};De.default=Hn});var Kn=c(le=>{"use strict";var Bn=le&&le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(le,"__esModule",{value:!0});le.Document=void 0;var Za=Bn(k()),eu=Bn(at()),kn=class{constructor(e,r,s){this.collectionName=e,this.documentId=r,this.apiCall=s}async retrieve(){return await this.apiCall.get(this.endpointPath())}async delete(){return await this.apiCall.delete(this.endpointPath())}async update(e,r={}){return await this.apiCall.patch(this.endpointPath(),e,r)}endpointPath(){return`${Za.default.RESOURCEPATH}/${this.collectionName}${eu.default.RESOURCEPATH}/${this.documentId}`}};le.Document=kn});var Jn=c(Ne=>{"use strict";var ce=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ne,"__esModule",{value:!0});var tu=ce(k()),ru=ce(at()),su=re(),nu=ce(rr()),iu=ce(In()),ou=ce(sr()),au=ce($n()),uu=Kn(),zn=class{constructor(e,r,s){this.name=e,this.apiCall=r,this.configuration=s,this.individualDocuments={},this.individualOverrides={},this.individualSynonyms={},this.name=e,this.apiCall=r,this.configuration=s,this._documents=new ru.default(this.name,this.apiCall,this.configuration),this._overrides=new nu.default(this.name,this.apiCall),this._synonyms=new ou.default(this.name,this.apiCall)}async retrieve(){return await this.apiCall.get(this.endpointPath())}async delete(){return await this.apiCall.delete(this.endpointPath())}async exists(){try{return await this.retrieve(),!0}catch(e){if(e instanceof su.ObjectNotFound)return!1;throw e}}documents(e){return e?(this.individualDocuments[e]===void 0&&(this.individualDocuments[e]=new uu.Document(this.name,e,this.apiCall)),this.individualDocuments[e]):this._documents}overrides(e){return e===void 0?this._overrides:(this.individualOverrides[e]===void 0&&(this.individualOverrides[e]=new iu.default(this.name,e,this.apiCall)),this.individualOverrides[e])}synonyms(e){return e===void 0?this._synonyms:(this.individualSynonyms[e]===void 0&&(this.individualSynonyms[e]=new au.default(this.name,e,this.apiCall)),this.individualSynonyms[e])}endpointPath(){return`${tu.default.RESOURCEPATH}/${this.name}`}};Ne.default=zn});var ir=c(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});var Wn="/aliases",ct=class{constructor(e){this.apiCall=e}async upsert(e,r){return await this.apiCall.put(this.endpointPath(e),r)}async retrieve(){return await this.apiCall.get(Wn)}endpointPath(e){return`${ct.RESOURCEPATH}/${e}`}static get RESOURCEPATH(){return Wn}};nr.default=ct});var Gn=c(xe=>{"use strict";var lu=xe&&xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xe,"__esModule",{value:!0});var cu=lu(ir()),Vn=class{constructor(e,r){this.name=e,this.apiCall=r}async retrieve(){return await this.apiCall.get(this.endpointPath())}async delete(){return await this.apiCall.delete(this.endpointPath())}endpointPath(){return`${cu.default.RESOURCEPATH}/${this.name}`}};xe.default=Vn});var ar=c(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});var du=require("crypto"),Yn="/keys",dt=class{constructor(e){this.apiCall=e,this.apiCall=e}async create(e){return await this.apiCall.post(dt.RESOURCEPATH,e)}retrieve(){return this.apiCall.get(Yn)}generateScopedSearchKey(e,r){let s=JSON.stringify(r),n=Buffer.from(du.createHmac("sha256",e).update(s).digest("base64")),i=e.substr(0,4),a=`${n}${i}${s}`;return Buffer.from(a).toString("base64")}static get RESOURCEPATH(){return Yn}};or.default=dt});var Qn=c(Me=>{"use strict";var fu=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Me,"__esModule",{value:!0});var hu=fu(ar()),Xn=class{constructor(e,r){this.id=e,this.apiCall=r}async retrieve(){return await this.apiCall.get(this.endpointPath())}async delete(){return await this.apiCall.delete(this.endpointPath())}endpointPath(){return`${hu.default.RESOURCEPATH}/${this.id}`}};Me.default=Xn});var ei=c(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});var pu="/debug",Zn=class{constructor(e){this.apiCall=e}async retrieve(){return await this.apiCall.get(pu)}};ur.default=Zn});var ri=c(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});var mu="/metrics.json",ti=class{constructor(e){this.apiCall=e}retrieve(){return this.apiCall.get(mu)}};lr.default=ti});var ni=c(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});var vu="/health",si=class{constructor(e){this.apiCall=e}async retrieve(){return await this.apiCall.get(vu)}};cr.default=si});var oi=c(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});var yu="/operations",ii=class{constructor(e){this.apiCall=e}perform(e,r={}){return this.apiCall.post(`${yu}/${e}`,{},r)}};dr.default=ii});var fr=c(Fe=>{"use strict";var _u=Fe&&Fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fe,"__esModule",{value:!0});var gu=_u(Qt()),Cu="/multi_search",ai=class{constructor(e,r,s=!1){this.apiCall=e,this.configuration=r,this.useTextContentType=s,this.requestWithCache=new gu.default}perform(e,r={},{cacheSearchResultsForSeconds:s=this.configuration.cacheSearchResultsForSeconds}={}){let n={};this.useTextContentType&&(n["content-type"]="text/plain");let i={};this.configuration.useServerSideSearchCache===!0&&(i.usecache=!0);let a=Object.assign({},r,i);return this.requestWithCache.perform(this.apiCall,this.apiCall.post,[Cu,e,a,n],{cacheResponseForSeconds:s})}};Fe.default=ai});var li=c(je=>{"use strict";var M=je&&je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(je,"__esModule",{value:!0});var wu=M(_t()),Eu=M(Vt()),Ru=M(k()),bu=M(Jn()),Ou=M(ir()),qu=M(Gn()),Su=M(ar()),Pu=M(Qn()),Tu=M(ei()),Au=M(ri()),Du=M(ni()),Nu=M(oi()),xu=M(fr()),ui=class{constructor(e){this.configuration=new wu.default(e),this.apiCall=new Eu.default(this.configuration),this.debug=new Tu.default(this.apiCall),this.metrics=new Au.default(this.apiCall),this.health=new Du.default(this.apiCall),this.operations=new Nu.default(this.apiCall),this.multiSearch=new xu.default(this.apiCall,this.configuration),this._collections=new Ru.default(this.apiCall),this.individualCollections={},this._aliases=new Ou.default(this.apiCall),this.individualAliases={},this._keys=new Su.default(this.apiCall),this.individualKeys={}}collections(e){return e===void 0?this._collections:(this.individualCollections[e]===void 0&&(this.individualCollections[e]=new bu.default(e,this.apiCall,this.configuration)),this.individualCollections[e])}aliases(e){return e===void 0?this._aliases:(this.individualAliases[e]===void 0&&(this.individualAliases[e]=new qu.default(e,this.apiCall)),this.individualAliases[e])}keys(e){return e===void 0?this._keys:(this.individualKeys[e]===void 0&&(this.individualKeys[e]=new Pu.default(e,this.apiCall)),this.individualKeys[e])}};je.default=ui});var di=c(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.SearchOnlyCollection=void 0;var Mu=er(),ci=class{constructor(e,r,s){this.name=e,this.apiCall=r,this.configuration=s,this._documents=new Mu.SearchOnlyDocuments(this.name,this.apiCall,this.configuration)}documents(){return this._documents}};ft.SearchOnlyCollection=ci});var hi=c(Ue=>{"use strict";var hr=Ue&&Ue.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ue,"__esModule",{value:!0});var Fu=hr(_t()),ju=hr(Vt()),Uu=hr(fr()),Iu=di(),fi=class{constructor(e){(e.apiKey||"").length<2e3&&(e.sendApiKeyAsQueryParam=!0),this.configuration=new Fu.default(e),this.apiCall=new ju.default(this.configuration),this.multiSearch=new Uu.default(this.apiCall,this.configuration,!0),this.individualCollections={}}collections(e){if(e)return this.individualCollections[e]===void 0&&(this.individualCollections[e]=new Iu.SearchOnlyCollection(e,this.apiCall,this.configuration)),this.individualCollections[e];throw new Error("Typesense.SearchClient only supports search operations, so the collectionName that needs to be searched must be specified. Use Typesense.Client if you need to access the collection object.")}};Ue.default=fi});var mi=c(T=>{"use strict";var Lu=T&&T.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),Hu=T&&T.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$u=T&&T.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lu(e,t,r);return Hu(e,t),e},pi=T&&T.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(T,"__esModule",{value:!0});T.Errors=T.SearchClient=T.Client=void 0;var Bu=pi(li());T.Client=Bu.default;var ku=pi(hi());T.SearchClient=ku.default;var Ku=$u(re());T.Errors=Ku});var Xu={};Ei(Xu,{onRateCreate:()=>zu,onRateDelete:()=>Wu,onRateUpdate:()=>Ju,onReviewCreate:()=>Vu,onReviewDelete:()=>Yu,onReviewUpdate:()=>Gu});var te=Sr(require("firebase-functions"));var vi=Sr(mi()),yi=({host:t="192.168.1.10",port:e=parseInt("8108"),protocol:r="8108",apiKey:s="xyz"}={})=>new vi.Client({nodes:[{host:t,port:e,protocol:r}],apiKey:s,connectionTimeoutSeconds:2});var de=yi({host:"search-engine"}),pr="/users/{userID}/employers/{employerID}/roles/{roleID}/rate/{rateID}",mr="rate",zu=te.firestore.document(pr).onCreate((t,e)=>{let{userID:r,roleID:s,rateID:n}=e.params,l=t.data(),{date:i}=l,a=pe(l,["date"]);return de.collections(mr).documents().create(he({id:n,userID:r,roleID:s,date:i._seconds},a))}),Ju=te.firestore.document(pr).onUpdate((t,e)=>{let{rateID:r}=e.params,i=t.after.data(),{date:s}=i,n=pe(i,["date"]);return de.collections(mr).documents(r).update(he({date:s._seconds},n))}),Wu=te.firestore.document(pr).onDelete((t,e)=>de.collections(mr).documents(e.params.rateID).delete()),vr="/users/{userID}/employers/{employerID}/roles/{roleID}/review/{reviewID}",yr="review",Vu=te.firestore.document(vr).onCreate((t,e)=>{let{userID:r,roleID:s,reviewID:n}=e.params,l=t.data(),{date:i}=l,a=pe(l,["date"]);return de.collections(yr).documents().create(he({id:n,userID:r,roleID:s,date:i._seconds},a))}),Gu=te.firestore.document(vr).onUpdate((t,e)=>{let{reviewID:r}=e.params,i=t.after.data(),{date:s}=i,n=pe(i,["date"]);return de.collections(yr).documents(r).update(he({date:s._seconds},n))}),Yu=te.firestore.document(vr).onDelete((t,e)=>de.collections(yr).documents(e.params.reviewID).delete());module.exports=Ri(Xu);0&&(module.exports={onRateCreate,onRateDelete,onRateUpdate,onReviewCreate,onReviewDelete,onReviewUpdate});
